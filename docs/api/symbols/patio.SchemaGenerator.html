<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>patio.SchemaGenerator</title>

<!--[if gte IE 9]>
            <style type="text/css">
              * {
                 filter: none !important;
              }
            </style>
          <![endif]-->
        <link type="text/css" href="../css/default.css" rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" src="../js/doc.js"></script>
        <script type="text/javaScript" src="../js/chili/jquery.chili-2.2.js"></script>
        <script type="text/javaScript" src="../js/chili/recipes.js"></script>
	</head>

	<body>
	
    	    <a href="http://github.com/pollenware/patio">
    	            <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/71eeaab9d563c2b3c590319b398dd35683265e85/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub">
    	       </a>
    	    
         <div class="menuContainer">
                        <div class="menuContainerContent">

                        <div class="menuContainerTitle">Class Table Of Contents</div>
                        <ul>
                            
            <li><span class='nodeContainer'><a href="../index.html" class=""><span>All Classes</span></a></span></li>
            <li><span class='nodeContainer'><a href="../files.html" class=""><span>All Files</span></a></span></li>
            <li class="parent"><span class='parentContainer'><a href="../index.html" class=""><span>API</span></a></span></a>
                <ul><li class='parent'><span class='parentContainer'><a href="../symbols/patio.html" class="" >patio</a></span><ul><li class='parent'><span class='parentContainer'><a href="../symbols/patio.sql.html" class="" >sql</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.sql.Year.html" class="" >Year</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SQLFunction.html" class="" >SQLFunction</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Decimal.html" class="" >Decimal</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.AliasMethods.html" class="" >AliasMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinClause.html" class="" >JoinClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Expression.html" class="" >Expression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.CaseExpression.html" class="" >CaseExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringMethods.html" class="" >StringMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SubscriptMethods.html" class="" >SubscriptMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Time.html" class="" >Time</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.LiteralString.html" class="" >LiteralString</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.PlaceHolderLiteralString.html" class="" >PlaceHolderLiteralString</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Identifier.html" class="" >Identifier</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.OrderedMethods.html" class="" >OrderedMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringConcatenationMethods.html" class="" >StringConcatenationMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringExpression.html" class="" >StringExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanConstant.html" class="" >BooleanConstant</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.GenericExpression.html" class="" >GenericExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Cast.html" class="" >Cast</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BitWiseMethods.html" class="" >BitWiseMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.AliasedExpression.html" class="" >AliasedExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.OrderedExpression.html" class="" >OrderedExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.DateTime.html" class="" >DateTime</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.NumericMethods.html" class="" >NumericMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Float.html" class="" >Float</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanMethods.html" class="" >BooleanMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinUsingClause.html" class="" >JoinUsingClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SubScript.html" class="" >SubScript</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.NoBooleanInputMethods.html" class="" >NoBooleanInputMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.TimeStamp.html" class="" >TimeStamp</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ColumnAll.html" class="" >ColumnAll</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanExpression.html" class="" >BooleanExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.QualifiedIdentifier.html" class="" >QualifiedIdentifier</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ComplexExpression.html" class="" >ComplexExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinOnClause.html" class="" >JoinOnClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ComplexExpressionMethods.html" class="" >ComplexExpressionMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.InequalityMethods.html" class="" >InequalityMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Constants.html" class="" >Constants</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.QualifyingMethods.html" class="" >QualifyingMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Constant.html" class="" >Constant</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.CastMethods.html" class="" >CastMethods</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.AlterTableGenerator.html" class="" >AlterTableGenerator</a></span></li><li class='parent'><span class='parentContainer'><a href='#'>migrations</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.migrations.TimestampMigrator.html" class="" >TimestampMigrator</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.migrations.IntegerMigrator.html" class="" >IntegerMigrator</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.migrations.Migrator.html" class="" >Migrator</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.Database.html" class="" >Database</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.Time.html" class="" >Time</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.SchemaGenerator.html" class="" >SchemaGenerator</a></span></li><li class='parent'><span class='parentContainer'><a href="../symbols/patio.plugins.html" class="" >plugins</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.plugins.CachePlugin.html" class="" >CachePlugin</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.plugins.ClassTableInheritancePlugin.html" class="" >ClassTableInheritancePlugin</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.plugins.TimeStampPlugin.html" class="" >TimeStampPlugin</a></span></li></ul></li><li class='parent'><span class='parentContainer'><a href='#'>associations</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.associations.OneToMany.html" class="" >OneToMany</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.ManyToMany.html" class="" >ManyToMany</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.Association.html" class="" >Association</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.ManyToOne.html" class="" >ManyToOne</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.Model.html" class="" >Model</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.Dataset.html" class="" >Dataset</a></span></li></ul></li></ul>

            </li>


                        <!-- ============================== constructor summary ==================== -->
                        			

                        			   <li>
                        			        <span class="nodeContainer">
                        			                <a href="../symbols/patio.SchemaGenerator.html#constructor" class="" >patio.SchemaGenerator</a>
                        			        </span>
                        			   </li>
                                     
                        <!-- ============================== properties toc ===================== -->
                        			

                        <!-- ============================== methods toc ======================== -->
                                    
                                        
                                        	
                                        	 <li class="parent"><span class="parentContainer"><a href="#">Methods</a></span>
                                                <ul>
                                                    	
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#check" class="" >check</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#column" class="" >column</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#constraint" class="" >constraint</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#foreignKey" class="" >foreignKey</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#fullTextIndex" class="" >fullTextIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#hasColumn" class="" >hasColumn</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#index" class="" >index</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#primaryKey" class="" >primaryKey</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#spatialIndex" class="" >spatialIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.SchemaGenerator.html#unique" class="" >unique</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                </ul>
                                             </li>
                                        	
                                     

                        <!-- ============================== events toc ======================== -->
                        			
                               </ul>
                         </div>

                    </div>


<!-- ============================== classes index ============================ -->
		<div class="contentContainer">
		<div id="content">
		<div class="section">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Class patio.SchemaGenerator
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				
				
				
					<br /><i>Defined in: </i> <a href="../symbols/src/lib_database_schemaGenerators.js.html" class="">schemaGenerators.js</a>.
				
				
                
                
			</p>
            </div>


<!-- ============================== constructor details ==================== -->		
			
			<div class="section">
			<div class="sectionTitle">
            					Class Detail
            				</div>
			<div class="methodDetail"><a name="constructor"> </a>
				
				<div class="fixedFont">
						<b>patio.SchemaGenerator</b>(the)
				</div>
				
				<div class="description">
					An internal class that the user is not expected to instantiate directly.
Instances are created by <a href="../symbols/patio.Database.html#createTable" class="" >patio.Database#createTable</a>.
It is used to specify table creation parameters.  It takes a Database
object and a block of column/index/constraint specifications, and
gives the Database a table description, which the database uses to
create a table.

<a href="../symbols/patio.SchemaGenerator.html" class="" >patio.SchemaGenerator</a> has some methods but also includes method_missing,
allowing users to specify column type as a method instead of using
the column method, which makes for a cleaner code.
					
				</div>
				
				
				
				<div class="exampleCode">
				    <h4>Example 1 : </h4>
				    <pre class="code">comb.executeInOrder(DB, function(DB){
      DB.createTable("airplane_type", function () {
         this.primaryKey("id");
         this.name(String, {allowNull:false});
         this.max_seats(Number, {size:3, allowNull:false});
         this.company(String, {allowNull:false});
      });
     DB.createTable("airplane", function () {
         this.primaryKey("id");
         this.total_no_of_seats(Number, {size:3, allowNull:false});
         this.foreignKey("typeId", "airplane_type", {key:"id"});
     });
     DB.createTable("flight_leg", function () {
         this.primaryKey("id");
         this.scheduled_departure_time("time");
         this.scheduled_arrival_time("time");
         this.foreignKey("departure_code", "airport", {key:"airport_code", type : String, size : 4});
         this.foreignKey("arrival_code", "airport", {key:"airport_code", type : String, size : 4});
         this.foreignKey("flight_id", "flight", {key:"id"});
     });
     DB.createTable("leg_instance", function () {
         this.primaryKey("id");
         this.date("date");
         this.arr_time("datetime");
         this.dep_time("datetime");
         this.foreignKey("airplane_id", "airplane", {key:"id"});
         this.foreignKey("flight_leg_id", "flight_leg", {key:"id"});
     });
});</pre>
				</div>
				
				
				
				
					
						<dl class="detailList">
						<dt class="heading">Parameters:</dt>
						
							<dt>
								<span class="light fixedFont">{<a href="../symbols/patio.Database.html" class="" >patio.Database</a>}</span>  <b>the</b>
								
							</dt>
								<dd>database this generator is for</dd>
						
						</dl>
					
					
					
					
					
					
					
					
                        <div class="sourceCode">
                            <pre class="code">
this.db = db;
this.columns = [];
this.indexes = [];
this.constraints = [];
this.__primaryKey = null;
    </pre>
                        </div>
                    

			</div>
			</div>
			

<!-- ============================== field details ========================== -->		
			

<!-- ============================== method details ========================= -->		
			
			<div class="section">
				<div class="sectionTitle">
					Method Detail
				</div>
				
				<a name="check"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>check</b>()
					
					</div>
					<div class="description">
						Add an unnamed constraint to the DDL, specified by the given block
or args:

  check({num : {between : [1,5]}})
     //=> CHECK num >= 1 AND num <= 5
  check(function(){return this.num.gt(5);});
     //=> CHECK num > 5
						
						
					</div>
					
					
					
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
return this.constraint.apply(this, [null].concat(comb.argsToArray(arguments)));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="column"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>column</b>(name, type, opts, key)
					
					</div>
					<div class="description">
						Add a column with the given name, type, and opts to the DDL.

<pre class="code">
 DB.createTable("test", function(){
     this.column("num", "integer");
         //=> num INTEGER
     this.column('name", String, {allowNull : false, "default" : "a");
         //=> name varchar(255) NOT NULL DEFAULT 'a'
     this.column("ip", "inet");
         //=> ip inet
  });
</pre>

You can also create columns via method missing, so the following are
equivalent:
<pre class="code">
DB.createTable("test", function(){
  this.column("number", "integer");
  this.number("integer");
});
</pre>
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String|<a href="../symbols/patio.sql.Identifier.html" class="" >patio.sql.Identifier</a>}</span> <b>name</b>
									
								</dt>
								<dd>the name of the column</dd>
							
								<dt>
									<b>type</b>
									
								</dt>
								<dd>the datatype of the column.</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>opts</b>
									<i>Optional</i>
								</dt>
								<dd>additional options</dd>
							
								<dt>
									<b>opts.default</b>
									<i>Optional</i>
								</dt>
								<dd>The default value for the column.</dd>
							
								<dt>
									<b>opts.deferrable</b>
									<i>Optional</i>
								</dt>
								<dd>This ensure Referential Integrity will work even if
               reference table will use for its foreign key a value that does not
               exists(yet) on referenced table. Basically it adds
               DEFERRABLE INITIALLY DEFERRED on key creation.</dd>
							
								<dt>
									<span class="light fixedFont">{Boolean}</span> <b>opts.index</b>
									<i>Optional</i>
								</dt>
								<dd>Create an index on this column.</dd>
							
								<dt>
									<span class="light fixedFont">{String|<a href="../symbols/patio.sql.Identifier.html" class="" >patio.sql.Identifier</a>}</span> <b>key</b>
									<i>Optional</i>
								</dt>
								<dd>For foreign key columns, the column in the associated table
        that this column references.  Unnecessary if this column references the primary key of the
        associated table.</dd>
							
								<dt>
									<span class="light fixedFont">{Boolean}</span> <b>opts.allowNull</b>
									<i>Optional</i>
								</dt>
								<dd>Mark the column as allowing NULL values (if true),
         or not allowing NULL values (if false).  If unspecified, will default
         to whatever the database default is.</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>opts.onDelete</b>
									<i>Optional</i>
								</dt>
								<dd>Specify the behavior of this column when being deleted
              ("restrict", "cascade", "setNull", "setDefault", "noAction").</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>opts.onUpdate</b>
									<i>Optional</i>
								</dt>
								<dd>Specify the behavior of this column when being updated
              Valid options ("restrict", "cascade", "setNull", "setDefault", "noAction").</dd>
							
								<dt>
									<span class="light fixedFont">{Boolean}</span> <b>opts.primaryKey</b>
									<i>Optional</i>
								</dt>
								<dd>Make the column as a single primary key column.  This should only
                be used if you have a single, non-autoincrementing primary key column.</dd>
							
								<dt>
									<span class="light fixedFont">{Number}</span> <b>opts.size</b>
									<i>Optional</i>
								</dt>
								<dd>The size of the column, generally used with string
         columns to specify the maximum number of characters the column will hold.
         An array of two integers can be provided to set the size and the
         precision, respectively, of decimal columns.</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>opts.unique</b>
									<i>Optional</i>
								</dt>
								<dd>Mark the column as unique, generally has the same effect as
           creating a unique index on the column.</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>opts.unsigned</b>
									<i>Optional</i>
								</dt>
								<dd>Make the column type unsigned, only useful for integer
             columns.</dd>
							
								<dt>
									<span class="light fixedFont">{Array}</span> <b>opts.elements</b>
									<i>Optional</i>
								</dt>
								<dd>Available items used for set and enum columns.</dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.columns.push(comb.merge({name:name, type:type}, opts));
if (opts.index) {
  this.index(name);
}
    </pre>
                            </div>
                        
                    </div>
				
				<a name="constraint"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>constraint</b>(name, args)
					
					</div>
					<div class="description">
						Adds a named constraint (or unnamed if name is nil) to the DDL,
with the given block or args.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.createTable("test", function(){
     this.constraint("blah", {num : {between : [1,5])
             //=> CONSTRAINT blah CHECK num >= 1 AND num <= 5
     this.check("foo", function(){
         return this.num.gt(5);
     }); # CONSTRAINT foo CHECK num > 5
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String|<a href="../symbols/patio.sql.Identifier.html" class="" >patio.sql.Identifier</a>}</span> <b>name</b>
									
								</dt>
								<dd>the name of the constraint</dd>
							
								<dt>
									<span class="light fixedFont">{...}</span> <b>args</b>
									
								</dt>
								<dd>variable number of arguments to create the constraint filter.
             See <a href="../symbols/patio.Dataset.html#filter" class="" >patio.Dataset#filter</a> for valid filter arguments.</dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
args = comb.argsToArray(arguments).slice(1);
var block = comb.isFunction(args[args.length - 1]) ? args.pop : null;
this.constraints.push({name:name, type:"check", check:block || args});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="foreignKey"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>foreignKey</b>(name, table, opts)
					
					</div>
					<div class="description">
						Add a foreign key in the table that references another table to the DDL. See {@link patio.SchemaGenerator#column{
for options.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.createTable("flight_leg", function () {
     this.primaryKey("id");
     this.scheduled_departure_time("time");
     this.scheduled_arrival_time("time");
     this.foreignKey("departure_code", "airport", {key:"airport_code", type : String, size : 4});
     this.foreignKey("arrival_code", "airport", {key:"airport_code", type : String, size : 4});
     this.foreignKey("flight_id", "flight", {key:"id"});
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>table</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
opts = comb.isHash(table) ? comb.merge({}, table, opts) : comb.isString(table) ? comb.merge({table:table}, opts) : opts;
if (comb.isArray(name)) {
  return this.__compositeForeignKey(name, opts);
} else {
  return this.column(name, "integer", opts);
}
    </pre>
                            </div>
                        
                    </div>
				
				<a name="fullTextIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>fullTextIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a full text index on the given columns to the DDL.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code"> DB.createTable("posts", function () {
     this.title("text");
     this.body("text");
     this.fullTextIndex("title");
     this.fullTextIndex(["title", "body"]);
 });</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
return this.index(columns, comb.merge({type:"fullText"}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="hasColumn"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					<span class="light">{Boolean}</span>
					<b>hasColumn</b>(name)
					
					</div>
					<div class="description">
						Check if the DDL includes the creation of a column with the given name.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Boolean}</span> true if the DDL includes the creation of a column with the given name.</dd>
							
							</dl>
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
return this.columns.some(function(c) {
  return c.name == name
});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="index"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>index</b>(columns, opts)
					
					</div>
					<div class="description">
						Add an index on the given column(s) with the given options to the DDL.
The available options are:
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.createTable("test", function(table) {
      table.primaryKey("id", "integer", {null : false});
      table.column("name", "text");
      table.index("name", {unique : true});
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd>the column/n to create the index from.</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>opts</b>
									<i>Optional</i>
								</dt>
								<dd>Additional options</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>opts.type</b>
									<i>Optional</i>
								</dt>
								<dd>The type of index to use (only supported by some databases)</dd>
							
								<dt>
									<span class="light fixedFont">{Boolean}</span> <b>opts.unique</b>
									<i>Optional</i>
								</dt>
								<dd>:: Make the index unique, so duplicate values are not allowed.</dd>
							
								<dt>
									<b>opts.where</b>
									<i>Optional</i>
								</dt>
								<dd>:: Create a partial index (only supported by some databases)</dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
this.indexes.push(comb.merge({columns:comb.array.toArray(columns)}, opts || {}));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="primaryKey"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>primaryKey</b>(name)
					
					</div>
					<div class="description">
						Adds an auto-incrementing primary key column or a primary key constraint to the DDL.
To create a constraint, the first argument should be an array of columns
specifying the primary key columns. To create an auto-incrementing primary key
column, a single column can be used. In both cases, an options hash can be used
as the second argument.

If you want to create a primary key column that is not auto-incrementing, you
should not use this method.  Instead, you should use the regular <a href="../symbols/patio.SchemaGenerator.html#column" class="" >patio.SchemaGenerator#column</a>
method with a {primaryKey : true} option.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">db.createTable("airplane_type", function () {
     this.primaryKey("id");
         //=> id integer NOT NULL PRIMARY KEY AUTOINCREMENT
     this.name(String, {allowNull:false});
     this.max_seats(Number, {size:3, allowNull:false});
     this.company(String, {allowNull:false});
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
if (comb.isArray(name)) {
  return this.__compositePrimaryKey.apply(this, arguments);
} else {
  var args = comb.argsToArray(arguments).slice(1);
  var opts = args.pop();
  this.__primaryKey = comb.merge(opts, this.db.serialPrimaryKeyOptions, {name:name});
  opts = comb.isHash(opts) ? {type:opts} : opts;
  if ((type = args.pop()) != null) {
    comb.merge(opts, {type:type});
  }
  comb.merge(this.__primaryKey, opts);
  return this.__primaryKey;
}
    </pre>
                            </div>
                        
                    </div>
				
				<a name="spatialIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>spatialIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a spatial index on the given columns to the DDL.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
return this.index(columns, comb.merge({type:"spatial"}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="unique"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>unique</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a unique constraint on the given columns to the DDL. See <a href="../symbols/patio.SchemaGenerator.html#constraint" class="" >patio.SchemaGenerator#constraint</a>
for argument types.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.createTable("test", function(){
  this.unique("name");
         //=> UNIQUE (name)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.constraints.push(comb.merge({type:"unique", columns:comb.array.toArray(columns)}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				</div>
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
			<div class="fineprint section" style="clear:both">
                    			
                    			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0 on Wed Feb 08 2012 10:32:24 GMT-0600 (CST)
                    		</div>
		</div>
       </div>

	</body>
</html>
