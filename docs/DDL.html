<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>patio</title>
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/prettify.css">
    <style type="text/css">
        

/*.subnav-inner {*/
    /*width: 100%;*/
    /*height: 36px;*/
    /*background-color: #EEE;*/
    /*background-repeat: repeat-x;*/
    /*background-image: -moz-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, whiteSmoke), color-stop(100%, #EEE));*/
    /*background-image: -webkit-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -ms-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -o-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#f5f5f5', endColorstr = '#eeeeee', GradientType = 0);*/
    /*background-image: linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*-webkit-border-radius: 4px;*/
    /*-moz-border-radius: 4px;*/
    /*border-radius: 4px;*/
/*}*/

/*.subnav .nav > li > a:hover {*/
    /*color: black !important;*/
/*}*/

/*.subnav .nav li.dropdown .dropdown-toggle .caret,*/
/*.subnav .nav li.dropdown.open .caret {*/
    /*border-top-color: #999 !important;*/
    /*border-bottom-color: #999 !important;*/
/*}*/

/*.subnav-fixed {*/
    /*position: fixed;*/
    /*width : 90%;*/
    /*margin-right: auto;*/
    /*margin-left: auto;*/
    /*top: 40px;*/
    /*left: 0;*/
    /*right: 0;*/
    /*z-index: 1020;*/
    /*border-color: #D5D5D5;*/
    /*border-width: 0 0 1px;*/
    /*-webkit-border-radius: 0;*/
    /*-moz-border-radius: 0;*/
    /*border-radius: 0;*/
    /*-webkit-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*-moz-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);*/
/*}*/

/*.navbar .nav  .dropdown-menu {*/
    /*max-height: 500px;*/
    /*overflow: auto;*/
/*}â€‹*/

    </style>
    <style type="text/css">
        body {
            padding: 90px;
        }

        .subnav{
            margin-top: 40px;
            margin-right: auto;
            margin-left: auto;
            z-index: 1000;
        }

        .dropdown-menu{
            max-height: 500px;
            overflow-y: auto;
        }

        @media (max-width:979px) {
            .subnav{
                margin-top: auto;
            }
        }
    </style>
    <link rel="stylesheet" href="./assets/css/bootstrap-responsive.min.css">
    <script type="text/javascript">
        var init = (function () {
            "use strict";

            var processScroll = (function () {
                var curr = null, prev = null;
                return function (nav) {
                    var $win = $(window);
                    $('.subnav').each(function () {
                        var nav = $(this);
                        var navTop = $win.width() < 980 ? 0 : nav.offset().top - 40;

                        var scrollTop = $win.scrollTop();
                        if (scrollTop >= navTop && curr != nav) {
                            if(curr){
                                curr.removeClass('subnav-fixed')
                                prev = curr;
                            }
                            curr = nav;
                            curr.addClass('subnav-fixed')
                        } else if (curr == nav && scrollTop <= navTop) {
                            curr.removeClass('subnav-fixed');
                            prev.addClass('subnav-fixed');
                            curr = prev;
                        }else{
                            nav.removeClass('subnav-fixed');
                        }
                    });
                };
            })();

            return function () {
                window.prettyPrint && prettyPrint();
                $(".collapse").collapse();
                var $window = $(window);
                //$(".subnav").affix ();
                // fix sub nav on scroll
//                processScroll();
//                $(window).on('scroll', processScroll)
            }
        })();
    </script>
</head>
<body onload="init()">
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"> </span>
            </a>
            
            <a href="./index.html" class="brand">patio</a>
            
            <div class="nav-collapse">
                <ul class="nav">
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            <li><a href="./connecting.html">Connecting</a></li>
                            
                            <li><a href="./models.html">Models</a></li>
                            
                            <li><a href="./associations.html">Associations</a></li>
                            
                            <li><a href="./model-inheritance.html">Model Inheritance</a></li>
                            
                            <li><a href="./validation.html">Model Validation</a></li>
                            
                            <li><a href="./plugins.html">Model Plugins</a></li>
                            
                            <li><a href="./querying.html">Querying</a></li>
                            
                            <li><a href="./DDL.html">DDL</a></li>
                            
                            <li><a href="./migrations.html">Migrations</a></li>
                            
                            <li><a href="./logging.html">Logging</a></li>
                            
                            <li><a href="./History.html">Change Log</a></li>
                            
                            <li><a href="./coverage.html">Test Coverage</a></li>
                            
                        </ul>
                        

                        
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            <li><a href="patio_sql.html">patio.sql</a></li>
                            
                            <li><a href="patio_sql_Constants.html">patio.sql.Constants</a></li>
                            
                        </ul>
                    </li>
                    
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            <li><a href="./patio.html">patio</a></li>
                            
                            <li><a href="./patio_AlterTableGenerator.html">patio.AlterTableGenerator</a></li>
                            
                            <li><a href="./patio_AssociationError.html">patio.AssociationError</a></li>
                            
                            <li><a href="./patio_ConnectionPool.html">patio.ConnectionPool</a></li>
                            
                            <li><a href="./patio_Database.html">patio.Database</a></li>
                            
                            <li><a href="./patio_DatabaseError.html">patio.DatabaseError</a></li>
                            
                            <li><a href="./patio_Dataset.html">patio.Dataset</a></li>
                            
                            <li><a href="./patio_DatasetError.html">patio.DatasetError</a></li>
                            
                            <li><a href="./patio_ExpressionError.html">patio.ExpressionError</a></li>
                            
                            <li><a href="./patio_MigrationError.html">patio.MigrationError</a></li>
                            
                            <li><a href="./patio_Model.html">patio.Model</a></li>
                            
                            <li><a href="./patio_ModelError.html">patio.ModelError</a></li>
                            
                            <li><a href="./patio_NotImplemented.html">patio.NotImplemented</a></li>
                            
                            <li><a href="./patio_PatioError.html">patio.PatioError</a></li>
                            
                            <li><a href="./patio_QueryError.html">patio.QueryError</a></li>
                            
                            <li><a href="./patio_SchemaGenerator.html">patio.SchemaGenerator</a></li>
                            
                            <li><a href="./patio_Time.html">patio.Time</a></li>
                            
                            <li><a href="./patio_associations_Association.html">patio.associations.Association</a></li>
                            
                            <li><a href="./patio_associations_ManyToMany.html">patio.associations.ManyToMany</a></li>
                            
                            <li><a href="./patio_associations_ManyToOne.html">patio.associations.ManyToOne</a></li>
                            
                            <li><a href="./patio_associations_ManyToOne.html">patio.associations.ManyToOne</a></li>
                            
                            <li><a href="./patio_associations_OneToMany.html">patio.associations.OneToMany</a></li>
                            
                            <li><a href="./patio_dataset.html#._Query">patio.dataset._Query</a></li>
                            
                            <li><a href="./patio_migrations_IntegerMigrator.html">patio.migrations.IntegerMigrator</a></li>
                            
                            <li><a href="./patio_migrations_Migrator.html">patio.migrations.Migrator</a></li>
                            
                            <li><a href="./patio_migrations_TimestampMigrator.html">patio.migrations.TimestampMigrator</a></li>
                            
                            <li><a href="./patio_plugins_CachePlugin.html">patio.plugins.CachePlugin</a></li>
                            
                            <li><a href="./patio_plugins_ClassTableInheritancePlugin.html">patio.plugins.ClassTableInheritancePlugin</a></li>
                            
                            <li><a href="./patio_plugins_ColumnMapper.html">patio.plugins.ColumnMapper</a></li>
                            
                            <li><a href="./patio_plugins_TimeStampPlugin.html">patio.plugins.TimeStampPlugin</a></li>
                            
                            <li><a href="./patio_plugins_ValidatorPlugin.html">patio.plugins.ValidatorPlugin</a></li>
                            
                            <li><a href="./patio_sql_AliasMethods.html">patio.sql.AliasMethods</a></li>
                            
                            <li><a href="./patio_sql_AliasedExpression.html">patio.sql.AliasedExpression</a></li>
                            
                            <li><a href="./patio_sql_BitWiseMethods.html">patio.sql.BitWiseMethods</a></li>
                            
                            <li><a href="./patio_sql_BooleanConstant.html">patio.sql.BooleanConstant</a></li>
                            
                            <li><a href="./patio_sql_BooleanExpression.html">patio.sql.BooleanExpression</a></li>
                            
                            <li><a href="./patio_sql_BooleanMethods.html">patio.sql.BooleanMethods</a></li>
                            
                            <li><a href="./patio_sql_CaseExpression.html">patio.sql.CaseExpression</a></li>
                            
                            <li><a href="./patio_sql_Cast.html#.constructor">patio.sql.Cast.constructor</a></li>
                            
                            <li><a href="./patio_sql_CastMethods.html">patio.sql.CastMethods</a></li>
                            
                            <li><a href="./patio_sql_ColumnAll.html">patio.sql.ColumnAll</a></li>
                            
                            <li><a href="./patio_sql_ComplexExpression.html">patio.sql.ComplexExpression</a></li>
                            
                            <li><a href="./patio_sql_ComplexExpressionMethods.html">patio.sql.ComplexExpressionMethods</a></li>
                            
                            <li><a href="./patio_sql_Constant.html">patio.sql.Constant</a></li>
                            
                            <li><a href="./patio_sql_DateTime.html">patio.sql.DateTime</a></li>
                            
                            <li><a href="./patio_sql_Decimal.html">patio.sql.Decimal</a></li>
                            
                            <li><a href="./patio_sql_Expression.html">patio.sql.Expression</a></li>
                            
                            <li><a href="./patio_sql_Float.html">patio.sql.Float</a></li>
                            
                            <li><a href="./patio_sql_GenericExpression.html">patio.sql.GenericExpression</a></li>
                            
                            <li><a href="./patio_sql_Identifier.html">patio.sql.Identifier</a></li>
                            
                            <li><a href="./patio_sql_InequalityMethods.html">patio.sql.InequalityMethods</a></li>
                            
                            <li><a href="./patio_sql_JoinClause.html">patio.sql.JoinClause</a></li>
                            
                            <li><a href="./patio_sql_JoinOnClause.html">patio.sql.JoinOnClause</a></li>
                            
                            <li><a href="./patio_sql_JoinUsingClause.html">patio.sql.JoinUsingClause</a></li>
                            
                            <li><a href="./patio_sql_Json.html">patio.sql.Json</a></li>
                            
                            <li><a href="./patio_sql_JsonArray.html">patio.sql.JsonArray</a></li>
                            
                            <li><a href="./patio_sql_LiteralString.html#.constructor">patio.sql.LiteralString.constructor</a></li>
                            
                            <li><a href="./patio_sql_NoBooleanInputMethods.html">patio.sql.NoBooleanInputMethods</a></li>
                            
                            <li><a href="./patio_sql_NumericExpression.html">patio.sql.NumericExpression</a></li>
                            
                            <li><a href="./patio_sql_NumericMethods.html">patio.sql.NumericMethods</a></li>
                            
                            <li><a href="./patio_sql_OrderedExpression.html">patio.sql.OrderedExpression</a></li>
                            
                            <li><a href="./patio_sql_OrderedMethods.html">patio.sql.OrderedMethods</a></li>
                            
                            <li><a href="./patio_sql_PlaceHolderLiteralString.html">patio.sql.PlaceHolderLiteralString</a></li>
                            
                            <li><a href="./patio_sql_QualifiedIdentifier.html">patio.sql.QualifiedIdentifier</a></li>
                            
                            <li><a href="./patio_sql_QualifyingMethods.html">patio.sql.QualifyingMethods</a></li>
                            
                            <li><a href="./patio_sql_SQLFunction.html">patio.sql.SQLFunction</a></li>
                            
                            <li><a href="./patio_sql_StringConcatenationMethods.html">patio.sql.StringConcatenationMethods</a></li>
                            
                            <li><a href="./patio_sql_StringExpression.html">patio.sql.StringExpression</a></li>
                            
                            <li><a href="./patio_sql_StringMethods.html">patio.sql.StringMethods</a></li>
                            
                            <li><a href="./patio_sql_SubScript.html">patio.sql.SubScript</a></li>
                            
                            <li><a href="./patio_sql_SubscriptMethods.html">patio.sql.SubscriptMethods</a></li>
                            
                            <li><a href="./patio_sql_Time.html">patio.sql.Time</a></li>
                            
                            <li><a href="./patio_sql_TimeStamp.html">patio.sql.TimeStamp</a></li>
                            
                            <li><a href="./patio_sql_Year.html">patio.sql.Year</a></li>
                            
                        </ul>
                    </li>
                    
                </ul>
                
                <ul class="nav pull-right">

                    <li class="divider-vertical"></li>
                    <li><a href="https://github.com/C2FO/patio" target="#github" class="pull-right">github</a></li>
                </ul>
                
            </div>
        </div>
    </div>
</div>



<div class="container-fluid">
    <a name="top"></a>
    <div class="container">



<h1 id="ddl">DDL</h1>
<h2 id="-createtable-patio_database-html-createtable-"><a href="./patio_Database.html#createTable">createTable</a></h2>
<p>Patio supports the creation to tables through an instance of <a href="./patio_Database.html#createTable">patio.Database</a>. The <a href="./patio_Database.html#createTable">createTable</a> method is used by passing it a name of the table to create and a function which performs the actions to create <code>column</code>s, <code>indexe</code>s, <code>foreignKey</code>s, <code>constraint</code>s, and <code>primaryKey</code>s.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;airport&quot;, function () {
        this.primaryKey(&quot;id&quot;);
        this.airportCode(String, {size:4, allowNull:false, unique:true});
        this.name(String, {allowNull:false});
        this.city(String, {allowNull:false});
        this.state(String, {size:2, allowNull:false});
    });</code></pre>
<p>Patio by default supports the built in JavaScript types</p>
<ul>
<li><code>String</code> : varchar(255)</li>
<li><code>Boolean</code> : boolean or tinyint(1)</li>
<li><code>Number</code> : numeric</li>
<li><code>Date</code> : date</li>
</ul>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.name(String); //=&gt; `name` varchar(255)
    this.num(Number); //=&gt;  `num` numeric
    this.boolean(Boolean); //=&gt; `boolean` tinyint(1)
    this.date(Date); //=&gt; `date` date
});</code></pre>
<p>Patio also has a few other built in types that can be used.</p>
<ul>
<li><a href="./patio_sql_Time.html">patio.sql.Time</a> : time</li>
<li><a href="./patio_sql_TimeStamp.html">patio.sql.TimeStamp</a> : timestamp</li>
<li><a href="./patio_sql_DateTime.html">patio.sql.DateTime</a> - datetime</li>
<li><a href="./patio_sql_Year.html">patio.sql.Year</a> - year</li></li>
<li><a href="./patio_sql_Float.html">patio.sql.Float</a> - double precision</li>
<li><a href="./patio_sql_Decimal.html">patio.sql.Decimal</a> - double precision</li>
</ul>
<pre class='prettyprint linenums lang-js'><code>var sql = patio.sql;
DB.createTable(&quot;test&quot;, function () {
    this.timestamp(sql.TimeStamp);
    this.datetime(sql.DateTime);
    this.time(sql.Time);
    this.year(sql.Year);
    this.decimal(sql.Decimal);
    this.float(sql.Float);
});</code></pre>
<p>When creating a table there are a number of methods that can be invoked to create the table. For a full reference see <a href="./patio_SchemaGenerator.html">patio.SchemaGenerator</a>.</p>
<p>The most commonly used methods are:</p>
<h3 id="-column-patio_schemagenerator-html-column-"><a href="./patio_SchemaGenerator.html#column">column</a></h3>
<p>Add a column to the DDL.  </p>
<p><strong>Options</strong></p>
<ul>
<li><strong>key</strong> : For foreign key columns, the column in the associated table that this column references. Unnecessary if this column references the primary key of the associated table.</li>
<li><strong>allowNull</strong> : Mark the column as allowing NULL values (if true), or not allowing NULL values (if false). If unspecified, will default to whatever the database default is.</li>
<li><strong>onDelete</strong> : Specify the behavior of this column when being deleted. Valid options (&quot;restrict&quot;, &quot;cascade&quot;, &quot;setNull&quot;, &quot;setDefault&quot;, &quot;noAction&quot;).</li>
<li><strong>onUpdate</strong> : Specify the behavior of this column when being updated Valid options (&quot;restrict&quot;, &quot;cascade&quot;, &quot;setNull&quot;, &quot;setDefault&quot;, &quot;noAction&quot;).</li>
<li><strong>primaryKey</strong> : Make the column as a single primary key column. This should only be used if you have a single, non-autoincrementing primary key column.</li>
<li><strong>size</strong> : The size of the column, generally used with string columns to specify the maximum number of characters the column will hold. An array of two integers can be provided to set the size and the precision, respectively, of decimal columns.</li>
<li><strong>unique</strong> : Mark the column as unique, generally has the same effect as creating a unique index on the column.</li>
<li><strong>unsigned</strong> : Make the column type unsigned, only useful for integer columns.</li>
<li><strong>elements</strong> : Available items used for set and enum columns.    </li>
</ul>
<pre class='prettyprint linenums lang-js'><code> DB.createTable(&quot;test&quot;, function(){
     this.column(&quot;num&quot;, &quot;integer&quot;);
         //=&gt; num INTEGER
     this.column(&quot;name&quot;, String, {allowNull : false, &quot;default&quot; : &quot;a&quot;);
         //=&gt; name varchar(255) NOT NULL DEFAULT &#39;a&#39;
     this.column(&quot;ip&quot;, &quot;inet&quot;);
         //=&gt; ip inet
 });</code></pre>
<p>You can also create columns via method missing, so the following are equivalent:</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
  this.column(&quot;number&quot;, &quot;integer&quot;);
  //Same as
  this.number(&quot;integer&quot;);
});</code></pre>
<h3 id="-primarykey-patio_schemagenerator-html-primarykey-"><a href="./patio_SchemaGenerator.html#primaryKey">primaryKey</a></h3>
<p>Adds an auto-incrementing primary key column or a primary key constraint to the DDL</p>
<pre class='prettyprint linenums lang-js'><code>db.createTable(&quot;airplane_type&quot;, function () {
     this.primaryKey(&quot;id&quot;);
         //=&gt; id integer NOT NULL PRIMARY KEY AUTOINCREMENT
     this.name(String, {allowNull:false});
     this.created(sql.TimeStamp);
});</code></pre>
<p>If you want a primary key that is not an auto-incrementing number use <a href="./patio_SchemaGenerator.html#column">column</a> instead.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.pk(&quot;integer&quot;, {primaryKey : true}); //Non auto incrementing primary key.
});
DB.createTable(&quot;test2&quot;, function(){
    this.pk(String, {primaryKey : true}); //varchar(255) primary key.
});</code></pre>
<p>If you want a composite primary key pass an array of column names. <strong>Note:</strong> when creating a composite primary key it does not create the columns so you must create those also.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.firstName(String);
    this.lastName(String);
    this.primaryKey([&quot;firstName&quot;, &quot;lastName&quot;]); //composite key
});</code></pre>
<h3 id="-foreignkey-patio_schemagenerator-html-foreignkey-"><a href="./patio_SchemaGenerator.html#foreignKey">foreignKey</a></h3>
<p>Add a foreign key constraint to the DDL.</p>
<p><strong>Options</strong></p>
<ul>
<li><strong>deferrable</strong> : Makes the foreign key constraint checks deferrable, so they aren&#39;t checked until the end of the transaction.</li>
<li><strong>key</strong> : For foreign key columns, the column in the associated table that this column references. Unnecessary if this column references the primary key of the associated table, at least on most databases.</li>
<li><strong>onDelete</strong> : Specify the behavior of this column when being deleted. Valid options (&quot;restrict&quot;, &quot;cascade&quot;, &quot;setNull&quot;, &quot;setDefault&quot;, &quot;noAction&quot;).</li>
<li><strong>onUpdate </strong> : Specify the behavior of this column when being updated. Valid options (&quot;restrict&quot;, &quot;cascade&quot;, &quot;setNull&quot;, &quot;setDefault&quot;, &quot;noAction&quot;).</li>
</ul>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;flight&quot;, function () {
     this.primaryKey(&quot;id&quot;);
     this.airline(String, {allowNull:false});
});
DB.createTable(&quot;airport&quot;, function () {
     this.primaryKey(&quot;id&quot;);
     this.airportCode(String, {size:4, allowNull:false, unique:true});
     this.name(String, {allowNull:false});
     this.city(String, {allowNull:false});
     this.state(String, {size:2, allowNull:false});
});
DB.createTable(&quot;flight_leg&quot;, function () {
     this.primaryKey(&quot;id&quot;);
     this.scheduled_departure_time(&quot;time&quot;);
     this.scheduled_arrival_time(&quot;time&quot;);
     this.foreignKey(&quot;departure_code&quot;, &quot;airport&quot;, {key:&quot;airport_code&quot;, type : String, size : 4});
     this.foreignKey(&quot;arrival_code&quot;, &quot;airport&quot;, {key:&quot;airport_code&quot;, type : String, size : 4});
     this.foreignKey(&quot;flight_id&quot;, &quot;flight&quot;, {key:&quot;id&quot;});
});</code></pre>
<h3 id="-index-patio_schemagenerator-html-index-"><a href="./patio_SchemaGenerator.html#index">index</a></h3>
<p>Adds an index to the the DDL. For single columns, calling index is the same as using the <code>index</code> option when creating the column:</p>
<p><strong>Options</strong></p>
<ul>
<li><strong>name</strong> : The name of the index (generated based on the table and column names if not provided).</li>
<li><strong>type</strong> : The type of index to use (only supported by some databases)</li>
<li><strong>unique</strong> : Make the index unique, so duplicate values are not allowed.</li>
<li><strong>where</strong> : Create a partial index (only supported by some databases).</li>
</ul>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;a&quot;, function(){
    this.id(&quot;integer&quot;, {index : true});
});
// Same as:
DB.createTable(&quot;a&quot;, function(){
  this.id(&quot;integer&quot;);
  this.index(&quot;id&quot;);
});</code></pre>
<p>Similar to the <a href="./patio_SchemaGenerator.html#primaryKey">primaryKey</a> and <a href="./patio_SchemaGenerator.html#foreignKey">foreignKey</a> methods, calling index with an array of strings will create a multiple column index:</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id&quot;);
    this.first_name(String);
    this.last_name(String);
    this.index([&quot;first_name&quot;, &quot;last_name&quot;]); //multi-column index
});</code></pre>
<h3 id="-unique-patio_schemagenerator-html-unique-"><a href="./patio_SchemaGenerator.html#unique">unique</a></h3>
<p>The unique method creates a unique constraint on the table. A unique constraint generally operates identically to a unique index.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;a&quot;, function(){
    this.id(&quot;integer&quot;, {unique : true});
});
// Same as:
DB.createTable(&quot;a&quot;, function(){
  this.id(&quot;integer&quot;);
  this.index(&quot;id&quot;, {unique : true});
});

// Same as:
DB.createTable(&quot;a&quot;, function(){
  this.id(&quot;iteger&quot;);
  this.unique(&quot;id&quot;);
});</code></pre>
<p>Just like index, unique can set up a multiple column unique constraint, where the combination of the columns must be unique.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id&quot;);
    this.first_name(String);
    this.last_name(String);
    this.unique([&quot;first_name&quot;, &quot;last_name&quot;]);
});</code></pre>
<h3 id="-constraint-patio_schemagenerator-html-constraint-"><a href="./patio_SchemaGenerator.html#constraint">constraint</a></h3>
<p>creates a named table constraint:</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id&quot;);
    this.name(String);
    this.constraint(&quot;name_min_length&quot;, function(){ 
        return this.char_length(this.name).gt(2)
    });
});</code></pre>
<p>Instead of using a block, you can use arguments that will be handled similarly to <a href="./patio_Dataset.html#filter">patio.Dataset#filter</a>:</p>
<pre class='prettyprint linenums lang-js'><code>var sql = patio.sql;
DB.createTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id&quot;);
    this.name(String);
    this.constraint(&quot;name_min_length&quot;,  sql.char_length(sql.name).gt(2));
});</code></pre>
<h3 id="-check-patio_schemagenerator-html-check-"><a href="./patio_SchemaGenerator.html#check">check</a></h3>
<p>Operates just like <a href="./patio_SchemaGenerator.html#constraint">constraint</a>, except that it doesn&#39;t take a name and it creates an unnamed constraint.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id&quot;);
    this.name(String);
    this.check(function(){
        return this.char_length(this.name).gt(2)
    });
});</code></pre>
<h2 id="-altertable-patio_database-html-altertable-"><a href="./patio_Database.html#alterTable">alterTable</a></h2>
<p><a href="./patio_Database.html#alterTable">alterTable</a> is used to alter a tables definition. It is used just like <a href="./patio_Database.html#createTable">createTable</a> where you use a function to alter the table&#39;s definition. For a full reference see <a href="./patio_AlterTableGenerator.html">patio.AlterTableGenerator</a>.</p>
<pre class='prettyprint linenums lang-js'><code> DB.alterTable(&quot;xyz&quot;, function() {
     this.addColumn(&quot;aaa&quot;, &quot;text&quot;, {null : false, unique : true});
     this.dropColumn(&quot;bbb&quot;);
     this.renameColumn(&quot;ccc&quot;, &quot;ddd&quot;);
     this.setColumnType(&quot;eee&quot;, &quot;integer&quot;);
     this.setColumnDefault(&quot;hhh&quot;, &#39;abcd&#39;);
     this.addIndex(&quot;fff&quot;, {unique : true});
     this.dropIndex(&quot;ggg&quot;);
});</code></pre>
<h3 id="-addcolumn-patio_altertablegenerator-html-addcolumn-"><a href="./patio_AlterTableGenerator.html#addColumn">addColumn</a></h3>
<p>This method adds a column to the table. This method is similar to <code>createTable</code>&#39;s column method where the first parameter is the column and the second parameter is the data type and third parameter an optional options hash</p>
<pre class='prettyprint linenums lang-js'><code> DB.alterTable(&quot;test&quot;, function(){
     this.addColumn(&quot;num&quot;, &quot;integer&quot;);
     this.addColumn(&quot;name&quot;, String, {allowNull : false, &quot;default&quot; : &quot;a&quot;);
     this.addColumn(&quot;ip&quot;, &quot;inet&quot;);
 });</code></pre>
<h3 id="-dropcolumn-patio_altertablegenerator-html-dropcolumn-"><a href="./patio_AlterTableGenerator.html#dropColumn">dropColumn</a></h3>
<p>This method removes a column from the table definition.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
     this.dropColumn(&quot;num&quot;);
     this.dropColumn(&quot;name&quot;);
     this.dropColumn(&quot;ip&quot;);
 });</code></pre>
<h3 id="-renamecolumn-patio_altertablegenerator-html-renamecolumn-"><a href="./patio_AlterTableGenerator.html#renameColumn">renameColumn</a></h3>
<p>This method renames a column.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
     this.renameColumn(&quot;num&quot;, &quot;number&quot;);
     this.renameColumn(&quot;name&quot;, &quot;first_name&quot;);
     this.renameColumn(&quot;ip&quot;, &quot;ip_address&quot;);
 });</code></pre>
<h3 id="-addprimarykey-patio_altertablegenerator-html-addprimarykey-"><a href="./patio_AlterTableGenerator.html#addPrimaryKey">addPrimaryKey</a></h3>
<p>This method is used to add a primaryKey to a table incase you forgot to include a primaryKey when creating the table.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
     this.addPrimaryKey(&quot;id&quot;);     
 });</code></pre>
<p>Just like <code>createTable</code>&#39;s primaryKey method if you provide an array of columns to use it will not create the columns but, add a composite primaryKey.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addPrimaryKey([&quot;first_name&quot;, &quot;last_name&quot;]); //composite key
});</code></pre>
<p>If you just want to take an existing single column and make it a primary key, call addPrimaryKey with an array of one element:</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addPrimarykey([&quot;id&quot;]);
});</code></pre>
<h3 id="-addforeignkey-patio_altertablegenerator-html-addforeignkey-"><a href="./patio_AlterTableGenerator.html#addForeignKey">addForeignKey</a></h3>
<p>This method is used to add a foreign key to a table. Like when using <code>addPrimaryKey</code> if you pass a string as the first argument then a column will be created.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
     this.addForeignKey(&quot;test2_id&quot;, &quot;test2&quot;);
        //=&gt;ADD COLUMN test2_id integer REFERENCES test2
 });</code></pre>
<p>Just like <code>createTable</code>&#39;s foreignKey method if you provide an array of columns to use it will not create the columns but, add a composite foreignKey.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addForeignKey([&quot;first_name&quot;, &quot;last_name&quot;], &quot;users&quot;); //composite key
});</code></pre>
<p>If you just want to take an existing single column and make it a foreign key, call addForeignKey with an array of one element:</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addForeignKey([&quot;test2_id&quot;], &quot;test2&quot;);
});</code></pre>
<h3 id="-addindex-patio_altertablegenerator-html-addindex-"><a href="./patio_AlterTableGenerator.html#addIndex">addIndex</a></h3>
<p>Just like <code>createTable</code>&#39;s index method.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;table&quot;, function(){
  this.addIndex(&quot;first_name&quot;);
});</code></pre>
<p>Just like <code>createTable</code>&#39;s index method you can create a composite key by passing in an array of column names.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addIndex([&quot;first_name&quot;, &quot;last_name&quot;]);
});</code></pre>
<h3 id="-dropindex-patio_altertablegenerator-html-dropindex-"><a href="./patio_AlterTableGenerator.html#dropIndex">dropIndex</a></h3>
<p>Drops an index from a table.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.dropIndex(&quot;first_name&quot;);
});</code></pre>
<p>To drop an index with a custom name use the name option.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.dropIndex(&quot;first_name&quot;, {name : &quot;first_name_index&quot;});
});</code></pre>
<h3 id="-addconstraint-patio_altertablegenerator-html-addconstraint-"><a href="./patio_AlterTableGenerator.html#addConstraint">addConstraint</a></h3>
<p>Adds a named constraint to a table. Just like <code>createTable</code>&#39;s constraint method.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addConstraint(&quot;name_min_length&quot;, function(){
        return this.char_length(this.name).gt(2);
    });
});</code></pre>
<p><strong>Note:</strong> there is not a method to add an unnamed constraint when altering a table.</p>
<h3 id="-adduniqueconstraint-patio_altertablegenerator-html-adduniqueconstraint-"><a href="./patio_AlterTableGenerator.html#addUniqueConstraint">addUniqueConstraint</a></h3>
<p>Adds a unique constraint to a table. Just like <code>createTable</code>&#39;s unique method.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addUniqueConstraint(&quot;name&quot;);
});</code></pre>
<h3 id="-dropconstraint-patio_altertablegenerator-html-dropconstraint-"><a href="./patio_AlterTableGenerator.html#dropConstraint">dropConstraint</a></h3>
<p>Drops a named constraint from a table.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;albums&quot;, function(){
    this.dropConstraint(&quot;name_min_length&quot;);
});</code></pre>
<p>On MySQL you specify the type of constraint you are dropping.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;albums&quot;, function(){
  this.dropConstraint(&quot;albums_pk&quot;, {type : &quot;primaryKey&quot;});
  this.dropConstraint(&quot;albums_fk&quot;, {type : &quot;foreignKey&quot;});
  this.dropConstraint(&quot;albums_uk&quot;, {type : &quot;unique&quot;});
});</code></pre>
<h3 id="-setcolumndefault-patio_altertablegenerator-html-setcolumndefault-"><a href="./patio_AlterTableGenerator.html#setColumnDefault">setColumnDefault</a></h3>
<p>Sets a columns default value.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.setColumnDefault(&quot;first_name&quot;, &quot;John&quot;);
    this.setColumnDefault(&quot;last_name&quot;, &quot;Doe&quot;);
});</code></pre>
<h3 id="-setcolumntype-patio_altertablegenerator-html-setcolumntype-"><a href="./patio_AlterTableGenerator.html#setColumnType">setColumnType</a></h3>
<p>Sets the columns type.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.setColumnType(&quot;first_name&quot;, &quot;char(10)&quot;);
});</code></pre>
<h3 id="-setallownull-patio_altertablegenerator-html-setallownull-"><a href="./patio_AlterTableGenerator.html#setAllowNull">setAllowNull</a></h3>
<p>Changes the NULL/NOT NULL modifier of a column.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.setAllowNull(&quot;first_name&quot;, false); //NOT NULL
    this.setAllowNull(&quot;last_name&quot;, true); //NULL
});</code></pre>
<h2 id="-patio-database-patio_database-html-modification-methods"><a href="./patio_Database.html">patio.Database</a> modification methods</h2>
<p><a href="./patio_Database.html">patio.Database</a> has methods that act as shortcuts to an <a href="./patio_Database.html#alterTable">alterTable</a> call these methods include</p>
<ul>
<li><a href="./patio_Database.html#addColumn">addColumn</a></li>
<li><a href="./patio_Database.html#dropColumn">dropColumn</a></li>
<li><a href="./patio_Database.html#renameColumn">renameColumn</a></li>
<li><a href="./patio_Database.html#addIndex">addIndex</a></li>
<li><a href="./patio_Database.html#dropIndex">dropIndex</a></li>
<li><a href="./patio_Database.html#setColumnDefault">setColumnDefault</a></li>
<li><a href="./patio_Database.html#setColumnType">setColumnType</a></li>
</ul>
<p>These methods are useful when your only performing a couple of modifications at a time.</p>
<pre class='prettyprint linenums lang-js'><code>DB.alterTable(&quot;test&quot;, function(){
    this.addColumn(&quot;num&quot;, &quot;integer&quot;);
});

//same as
DB.addColumn(&quot;test&quot;, &quot;num&quot;, &quot;integer&quot;);</code></pre>
<h2 id="tables">Tables</h2>
<h3 id="-droptable-patio_database-html-droptable-"><a href="./patio_Database.html#dropTable">dropTable</a></h3>
<p>Can drop either a single table or multiple tables at a time.</p>
<pre class='prettyprint linenums lang-js'><code>DB.dropTable([&quot;leg_instance&quot;, &quot;flight_leg&quot;, &quot;flight&quot;, &quot;airplane&quot;, &quot;can_land&quot;, &quot;airplane_type&quot;, &quot;airport&quot;]);
//same as
DB.dropTable(&quot;leg_instance&quot;, &quot;flight_leg&quot;, &quot;flight&quot;, &quot;airplane&quot;, &quot;can_land&quot;, &quot;airplane_type&quot;, &quot;airport&quot;);
//OR one table
DB.dropTable(&quot;leg_instance&quot;);</code></pre>
<h3 id="-renametable-patio_database-html-renametable-"><a href="./patio_Database.html#renameTable">renameTable</a></h3>
<p>Renames an existing table.</p>
<pre class='prettyprint linenums lang-js'><code>DB.renameTable(&quot;test&quot;, &quot;test_old&quot;);</code></pre>
<h3 id="-forcecreatetable-patio_database-html-forcecreatetable-"><a href="./patio_Database.html#forceCreateTable">forceCreateTable</a></h3>
<p>Forcibly creates a table, attempting to drop it unconditionally (and catching any errors), then creating it. <strong>Note:</strong> This should not be used within a transaction as it could cause the transaction to fail.</p>
<pre class='prettyprint linenums lang-js'><code>DB.forceCreateTable(&quot;test&quot;, function(){
    this.primaryKey(&quot;id);
    this.first_name(String);
    this.last_name(String);
    this.date_of_birth(Date);
});</code></pre>
<h3 id="-createtableunlessexists-patio_database-html-createtableunlessexists-"><a href="./patio_Database.html#createTableUnlessExists">createTableUnlessExists</a></h3>
<p>Creates the table unless the table already exists.</p>
<pre class='prettyprint linenums lang-js'><code>DB.createTableUnlessExists(&quot;test&quot;, function(){
    this.primaryKey(&quot;id);
    this.first_name(String);
    this.last_name(String);
    this.date_of_birth(Date);
});</code></pre>
<h2 id="views">Views</h2>
<h3 id="-createview-patio_database-html-createview-"><a href="./patio_Database.html#createView">createView</a></h3>
<p>Creates a view based on a dataset or an SQL string:</p>
<pre class='prettyprint linenums lang-js'><code>//CREATE VIEW cheapItems AS SELECT * FROM items WHERE price &lt; 100
DB.createView(&quot;cheapItems&quot;, &quot;SELECT * FROM items WHERE price &lt; 100&quot;);

//CREATE  VIEW miscItems AS SELECT * FROM items WHERE category = &#39;misc&#39;
DB.createView(&quot;miscItems&quot;, DB[:items].filter({category : &#39;misc&#39;}));</code></pre>
<h3 id="-createorreplaceview-patio_database-html-createorreplaceview-"><a href="./patio_Database.html#createOrReplaceView">createOrReplaceView</a></h3>
<p>Same as create view but replaces the view if it already exists.</p>
<pre class='prettyprint linenums lang-js'><code>//CREATE VIEW cheapItems AS SELECT * FROM items WHERE price &lt; 100
DB.createOrReplaceView(&quot;cheapItems&quot;, &quot;SELECT * FROM items WHERE price &lt; 100&quot;);

//CREATE  VIEW miscItems AS SELECT * FROM items WHERE category = &#39;misc&#39;
DB.createOrReplaceView(&quot;miscItems&quot;, DB[:items].filter({category : &#39;misc&#39;}));</code></pre>
<h3 id="-dropview-patio_database-html-dropview-"><a href="./patio_Database.html#dropView">dropView</a></h3>
<p>Similar to <code>dropTable</code> but instead of a table it drops a view.</p>
<pre class='prettyprint linenums lang-js'><code>DB.dropView(&quot;test_view&quot;);
    //=&gt;&#39;DROP VIEW test_view&#39;
DB.dropTable(&quot;test_view_1&quot;, &quot;test_view_2&quot;, &quot;test_view_3&quot;);
    //=&gt;&#39;DROP VIEW test_view_1&#39;,
    //=&gt;&#39;DROP VIEW test_view_2&#39;,
    //=&gt;&#39;DROP VIEW test_view_3&#39;</code></pre>

<hr>

Documentation generated using <a href="https://github.com/doug-martin/coddoc">coddoc</a>.


</div>
</div>
<script type="text/javascript" src="./assets/js/jquery.js"></script>
<script type="text/javascript" src="./assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./assets/js/prettify.js"></script>

</body>
</html>
