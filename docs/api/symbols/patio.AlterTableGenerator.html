<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>patio.AlterTableGenerator</title>

<!--[if gte IE 9]>
            <style type="text/css">
              * {
                 filter: none !important;
              }
            </style>
          <![endif]-->
        <link type="text/css" href="../css/default.css" rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" src="../js/doc.js"></script>
        <script type="text/javaScript" src="../js/chili/jquery.chili-2.2.js"></script>
        <script type="text/javaScript" src="../js/chili/recipes.js"></script>
	</head>

	<body>
	
    	    <a href="http://github.com/pollenware/patio">
    	            <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/71eeaab9d563c2b3c590319b398dd35683265e85/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub">
    	       </a>
    	    
         <div class="menuContainer">
                        <div class="menuContainerContent">

                        <div class="menuContainerTitle">Class Table Of Contents</div>
                        <ul>
                            
            <li><span class='nodeContainer'><a href="../index.html" class=""><span>All Classes</span></a></span></li>
            <li><span class='nodeContainer'><a href="../files.html" class=""><span>All Files</span></a></span></li>
            <li class="parent"><span class='parentContainer'><a href="../index.html" class=""><span>API</span></a></span></a>
                <ul><li class='parent'><span class='parentContainer'><a href="../symbols/patio.html" class="" >patio</a></span><ul><li class='parent'><span class='parentContainer'><a href="../symbols/patio.sql.html" class="" >sql</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.sql.Year.html" class="" >Year</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SQLFunction.html" class="" >SQLFunction</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Decimal.html" class="" >Decimal</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.AliasMethods.html" class="" >AliasMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinClause.html" class="" >JoinClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Expression.html" class="" >Expression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.CaseExpression.html" class="" >CaseExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringMethods.html" class="" >StringMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SubscriptMethods.html" class="" >SubscriptMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Time.html" class="" >Time</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.LiteralString.html" class="" >LiteralString</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.PlaceHolderLiteralString.html" class="" >PlaceHolderLiteralString</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Identifier.html" class="" >Identifier</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.OrderedMethods.html" class="" >OrderedMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringConcatenationMethods.html" class="" >StringConcatenationMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.StringExpression.html" class="" >StringExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanConstant.html" class="" >BooleanConstant</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.GenericExpression.html" class="" >GenericExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Cast.html" class="" >Cast</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BitWiseMethods.html" class="" >BitWiseMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.AliasedExpression.html" class="" >AliasedExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.OrderedExpression.html" class="" >OrderedExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.DateTime.html" class="" >DateTime</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.NumericMethods.html" class="" >NumericMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Float.html" class="" >Float</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanMethods.html" class="" >BooleanMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinUsingClause.html" class="" >JoinUsingClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.SubScript.html" class="" >SubScript</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.NoBooleanInputMethods.html" class="" >NoBooleanInputMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.TimeStamp.html" class="" >TimeStamp</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ColumnAll.html" class="" >ColumnAll</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.BooleanExpression.html" class="" >BooleanExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.QualifiedIdentifier.html" class="" >QualifiedIdentifier</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ComplexExpression.html" class="" >ComplexExpression</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.JoinOnClause.html" class="" >JoinOnClause</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.ComplexExpressionMethods.html" class="" >ComplexExpressionMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.InequalityMethods.html" class="" >InequalityMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Constants.html" class="" >Constants</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.QualifyingMethods.html" class="" >QualifyingMethods</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.Constant.html" class="" >Constant</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.sql.CastMethods.html" class="" >CastMethods</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.AlterTableGenerator.html" class="" >AlterTableGenerator</a></span></li><li class='parent'><span class='parentContainer'><a href='#'>migrations</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.migrations.TimestampMigrator.html" class="" >TimestampMigrator</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.migrations.IntegerMigrator.html" class="" >IntegerMigrator</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.migrations.Migrator.html" class="" >Migrator</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.Database.html" class="" >Database</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.Time.html" class="" >Time</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.SchemaGenerator.html" class="" >SchemaGenerator</a></span></li><li class='parent'><span class='parentContainer'><a href="../symbols/patio.plugins.html" class="" >plugins</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.plugins.CachePlugin.html" class="" >CachePlugin</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.plugins.TimeStampPlugin.html" class="" >TimeStampPlugin</a></span></li></ul></li><li class='parent'><span class='parentContainer'><a href='#'>associations</a></span><ul><li><span class='nodeContainer'><a href="../symbols/patio.associations.OneToMany.html" class="" >OneToMany</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.ManyToMany.html" class="" >ManyToMany</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.Association.html" class="" >Association</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.associations.ManyToOne.html" class="" >ManyToOne</a></span></li></ul></li><li><span class='nodeContainer'><a href="../symbols/patio.Model.html" class="" >Model</a></span></li><li><span class='nodeContainer'><a href="../symbols/patio.Dataset.html" class="" >Dataset</a></span></li></ul></li></ul>

            </li>


                        <!-- ============================== constructor summary ==================== -->
                        			

                        			   <li>
                        			        <span class="nodeContainer">
                        			                <a href="../symbols/patio.AlterTableGenerator.html#constructor" class="" >patio.AlterTableGenerator</a>
                        			        </span>
                        			   </li>
                                     
                        <!-- ============================== properties toc ===================== -->
                        			

                        <!-- ============================== methods toc ======================== -->
                                    
                                        
                                        	
                                        	 <li class="parent"><span class="parentContainer"><a href="#">Methods</a></span>
                                                <ul>
                                                    	
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addColumn" class="" >addColumn</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addConstraint" class="" >addConstraint</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addForeignKey" class="" >addForeignKey</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addFullTextIndex" class="" >addFullTextIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addIndex" class="" >addIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addPrimaryKey" class="" >addPrimaryKey</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addSpatialIndex" class="" >addSpatialIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#addUniqueConstraint" class="" >addUniqueConstraint</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#dropColumn" class="" >dropColumn</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#dropConstraint" class="" >dropConstraint</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#dropIndex" class="" >dropIndex</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#renameColumn" class="" >renameColumn</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#setAllowNull" class="" >setAllowNull</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#setColumnDefault" class="" >setColumnDefault</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                    	       <li class="">
                                                                   		<span class="nodeContainer">
                                                                   		    <a href="../symbols/patio.AlterTableGenerator.html#setColumnType" class="" >setColumnType</a>
                                                                   		</span>
                                                               </li>
                                                         
                                                </ul>
                                             </li>
                                        	
                                     

                        <!-- ============================== events toc ======================== -->
                        			
                               </ul>
                         </div>

                    </div>


<!-- ============================== classes index ============================ -->
		<div class="contentContainer">
		<div id="content">
		<div class="section">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Class patio.AlterTableGenerator
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				
				
				
					<br /><i>Defined in: </i> <a href="../symbols/src/lib_database_schemaGenerators.js.html" class="">schemaGenerators.js</a>.
				
				
                
                
			</p>
            </div>


<!-- ============================== constructor details ==================== -->		
			
			<div class="section">
			<div class="sectionTitle">
            					Class Detail
            				</div>
			<div class="methodDetail"><a name="constructor"> </a>
				
				<div class="fixedFont">
						<b>patio.AlterTableGenerator</b>(db, block)
				</div>
				
				<div class="description">
					An internal class that the user is not expected to instantiate directly.
Instances are created by <a href="../symbols/patio.Database.html#alterTable" class="" >patio.Database#alterTable</a>.
It is used to specify table alteration parameters.  It takes a Database
object and a function which is called in the scope of the <a href="../symbols/patio.AlterTableGenerator.html" class="" >patio.AlterTableGenerator</a>
to perform on the table, and gives the Database an array of table altering operations,
which the database uses to alter a table's description.
					
				</div>
				
				
				
				<div class="exampleCode">
				    <h4>Example 1 : </h4>
				    <pre class="code">DB.alterTable("xyz", function() {
     this.addColumn("aaa", "text", {null : false, unique : true});
     this.dropColumn("bbb");
     this.renameColumn("ccc", "ddd");
     this.setColumnType("eee", "integer");
     this.setColumnDefault("hhh", 'abcd');
     this.addIndex("fff", {unique : true});
     this.dropIndex("ggg");
});

//or using the passed in generator
 DB.alterTable("xyz", function(table) {
     table.addColumn("aaa", "text", {null : false, unique : true});
     table.dropColumn("bbb");
     table.renameColumn("ccc", "ddd");
     table.setColumnType("eee", "integer");
     table.setColumnDefault("hhh", 'abcd');
     table.addIndex("fff", {unique : true});
     table.dropIndex("ggg");
});</pre>
				</div>
				
				
				
				
					
						<dl class="detailList">
						<dt class="heading">Parameters:</dt>
						
							<dt>
								<span class="light fixedFont">{<a href="../symbols/patio.Database.html" class="" >patio.Database</a>}</span>  <b>db</b>
								
							</dt>
								<dd>the database object which is performing the alter table operation.</dd>
						
							<dt>
								<span class="light fixedFont">{Function}</span>  <b>block</b>
								
							</dt>
								<dd>a block which performs the operations. The block is called in the scope
of the <a href="../symbols/patio.AlterTableGenerator.html" class="" >patio.AlterTableGenerator</a> and is passed an instance of <a href="../symbols/patio.AlterTableGenerator.html" class="" >patio.AlterTableGenerator</a>
as the first argument.</dd>
						
						</dl>
					
					
					
					
					
					
					
					
                        <div class="sourceCode">
                            <pre class="code">
this.db = db;
this.operations = [];
block.apply(this, [this]);

    </pre>
                        </div>
                    

			</div>
			</div>
			

<!-- ============================== field details ========================== -->		
			

<!-- ============================== method details ========================= -->		
			
			<div class="section">
				<div class="sectionTitle">
					Method Detail
				</div>
				
				<a name="addColumn"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addColumn</b>(name, type, opts)
					
					</div>
					<div class="description">
						Add a column with the given name, type, and opts to the DDL for the table.
See <a href="../symbols/patio.SchemaGenerator.html#column" class="" >patio.SchemaGenerator#column</a> for the available options.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("test", function(){
  this.addColumn("name", String);
    //=> ADD COLUMN name varchar(255)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>type</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.operations.push(comb.merge({op:"addColumn", name:name, type:type}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addConstraint"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addConstraint</b>(name)
					
					</div>
					<div class="description">
						Add a constraint with the given name and args to the DDL for the table.
See <a href="../symbols/patio.SchemaGenerator.html#constraint" class="" >patio.SchemaGenerator#constraint</a>.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">var sql = patio.sql;
DB.alterTable("test", function(){
     this.addConstraint("valid_name", sql.name.like('A%'));
         //=>ADD CONSTRAINT valid_name CHECK (name LIKE 'A%')
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
var args = comb.argsToArray(arguments);
var block = comb.isFunction(args[args.length - 1]) ? args.pop() : null;
this.operations.push({op:"addConstraint", name:name, type:"check", check:block || args});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addForeignKey"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addForeignKey</b>(name, table, opts)
					
					</div>
					<div class="description">
						Add a foreign key with the given name and referencing the given table
to the DDL for the table.  See <a href="../symbols/patio.SchemaGenerator.html#column" class="" >patio.SchemaGenerator#column</a>
for the available options.

You can also pass an array of column names for creating composite foreign
keys. In this case, it will assume the columns exists and will only add
the constraint.

NOTE: If you need to add a foreign key constraint to a single existing column
use the composite key syntax even if it is only one column.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("albums", function(){
  this.addForeignKey("artist_id", "table");
         //=>ADD COLUMN artist_id integer REFERENCES table
  this.addForeignKey(["name"], "table")
         //=>ADD FOREIGN KEY (name) REFERENCES table
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>table</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts;
if (comb.isArray(name)) {
  return this.__addCompositeForeignKey(name, table, opts);
} else {
  return this.addColumn(name, "integer", comb.merge({table:table}, opts));
}
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addFullTextIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addFullTextIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a full text index on the given columns to the DDL for the table.
See @{link patio.SchemaGenerator#index} for available options.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
return this.addIndex(columns, comb.merge({type:"fullText"}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Add an index on the given columns to the DDL for the table.  See
<a href="../symbols/patio.SchemaGenerator.html#index" class="" >patio.SchemaGenerator#index</a> for available options.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("table", function(){
  this.addIndex("artist_id");
         //=> CREATE INDEX table_artist_id_index ON table (artist_id)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.operations.push(comb.merge({op:"addIndex", columns:comb.array.toArray(columns)}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addPrimaryKey"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addPrimaryKey</b>(name, opts)
					
					</div>
					<div class="description">
						Add a primary key to the DDL for the table.  See <a href="../symbols/patio.SchemaGenerator.html#column" class="" >patio.SchemaGenerator#column</a>
for the available options.  Like patio.ALterTableGenerator#addForeignKey, if you specify
the column name as an array, it just creates a constraint:
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("albums", function(){
     this.addPrimaryKey("id");
          //=> ADD COLUMN id serial PRIMARY KEY
     this.addPrimaryKey(["artist_id", "name"])
         //=>ADD PRIMARY KEY (artist_id, name)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
if (comb.isArray(name)) {
  return this.__addCompositePrimaryKey(name, opts);
} else {
  opts = comb.merge({}, this.db.serialPrimaryKeyOptions, opts);
  delete opts.type;
  return this.addColumn(name, opts, opts);
}
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addSpatialIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addSpatialIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a spatial index on the given columns to the DDL for the table.
See <a href="../symbols/patio.SchemaGenerator.html#index" class="" >patio.SchemaGenerator#index</a> for available options.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
addIndex(columns, comb.merge({}, {type:"spatial"}, opts))
    </pre>
                            </div>
                        
                    </div>
				
				<a name="addUniqueConstraint"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>addUniqueConstraint</b>(columns, opts)
					
					</div>
					<div class="description">
						Add a unique constraint to the given column(s).
See <a href="../symbols/patio.SchemaGenerator.html#constraint" class="" >patio.SchemaGenerator#constraint</a>.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("test", function(){
  this.addUniqueConstraint("name");
     //=> ADD UNIQUE (name)
  this.addUniqueConstraint("name", {name : "uniqueName});
     //=> ADD CONSTRAINT uniqueName UNIQUE (name)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.operations.push(comb.merge({op:"addConstraint", type:"unique", columns:comb.array.toArray(columns)}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="dropColumn"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>dropColumn</b>(name)
					
					</div>
					<div class="description">
						Remove a column from the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("albums", function(){
  this.dropColumn("artist_id");
     //=>DROP COLUMN artist_id
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String|<a href="../symbols/patio.sql.Identifier.html" class="" >patio.sql.Identifier</a>}</span> <b>name</b>
									
								</dt>
								<dd>the name of the column to drop.</dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
this.operations.push({op:"dropColumn", name:name});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="dropConstraint"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>dropConstraint</b>(name)
					
					</div>
					<div class="description">
						Remove a constraint from the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("test", function(){
     this.dropConstraint("constraint_name");
         //=>DROP CONSTRAINT constraint_name
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String|<a href="../symbols/patio.sql.Identifier.html" class="" >patio.sql.Identifier</a>}</span> <b>name</b>
									
								</dt>
								<dd>the name of the constraint to drop.</dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
this.operations.push({op:"dropConstraint", name:name});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="dropIndex"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>dropIndex</b>(columns, opts)
					
					</div>
					<div class="description">
						Remove an index from the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("albums", function(){
  this.dropIndex("artist_id")
     //=>DROP INDEX table_artist_id_index
  this.dropIndex(["a", "b"])
     //=>DROP INDEX table_a_b_index
  this.dropIndex(["a", "b"], {name : "foo"})
         //=>DROP INDEX foo
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>columns</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.operations.push(comb.merge({op:"dropIndex", columns:comb.array.toArray(columns)}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="renameColumn"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>renameColumn</b>(name, newName, opts)
					
					</div>
					<div class="description">
						Modify a column's name in the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("artist", function(){
     this.renameColumn("name", "artistName");
         //=> RENAME COLUMN name TO artist_name
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>newName</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {};
this.operations.push(comb.merge({op:"renameColumn", name:name, newName:newName}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				<a name="setAllowNull"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>setAllowNull</b>(name, allowNull)
					
					</div>
					<div class="description">
						Modify a column's NOT NULL constraint.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("artist", function(){
  this.setColumnAllowNull("artist_name", false);
     //=> ALTER COLUMN artist_name SET NOT NULL
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>allowNull</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
this.operations.push({op:"setColumnNull", name:name, "null":allowNull});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="setColumnDefault"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>setColumnDefault</b>(name, def)
					
					</div>
					<div class="description">
						Modify a column's default value in the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("artist", function(){
     //=>this.setColumnDefault("artist_name", "a");
         //=> ALTER COLUMN artist_name SET DEFAULT 'a'
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>def</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
this.operations.push({op:"setColumnDefault", name:name, "default":def});
    </pre>
                            </div>
                        
                    </div>
				
				<a name="setColumnType"> </a>
				<div class="methodDetail">
					<div class="fixedFont">
					
					
					<b>setColumnType</b>(name, type, opts)
					
					</div>
					<div class="description">
						Modify a column's type in the DDL for the table.
						
						
					</div>
					
					
					
					   <div class="exampleCode">
                       				    <h4>Example 1 : </h4>
                       				    <pre class="code">DB.alterTable("artist", function(){
  this.setColumnType("artist_name", 'char(10)');
     //=> ALTER COLUMN artist_name TYPE char(10)
});</pre>
                       				</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>name</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>type</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opts</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						
						
                        	<div class="sourceCode">
                                <pre class="code">
opts = opts || {}
this.operations.push(comb.merge({op:"setColumnType", name:name, type:type}, opts));
    </pre>
                            </div>
                        
                    </div>
				
				</div>
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
			<div class="fineprint section" style="clear:both">
                    			
                    			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0 on Tue Jan 31 2012 16:02:10 GMT-0600 (CST)
                    		</div>
		</div>
       </div>

	</body>
</html>
